(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/pigeon.8dfa22b7.svg"},110:function(e,t,a){e.exports=a.p+"static/media/PigeonRTC_signalling.8ef6af10.png"},111:function(e,t,a){e.exports=a.p+"static/media/WebRTC_signalling.04b3f57d.png"},112:function(e,t,a){e.exports=a.p+"static/media/WebRTC_needs_servers.18a98a74.png"},118:function(e,t,a){e.exports=a(299)},123:function(e,t,a){},125:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),c=a.n(i),o=(a(123),a(22)),s=a(23),l=a(25),u=a(24),m=a(26),d=a(21),h=(a(125),a(20)),p=a(113),f=a.n(p),b=a(114),v=a.n(b),g=a(115),C=a.n(g),E=a(116),O=a.n(E),y=a(117),w=a.n(y),S=a(52),k=a.n(S),T=a(34),j=a.n(T),x=a(8),A=a.n(x),N=a(73),I=a.n(N),R=a(72),B=a.n(R),P=a(108),D=a.n(P),M=a(71),V=a.n(M),W=a(69),L=a.n(W),U=a(70),_=a.n(U),F=a(16),G=a.n(F),J=a(105),z=a.n(J),$=a(107),q=a.n($),H=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(z.a,{className:e.videoCard},r.a.createElement(q.a,null,r.a.createElement(G.a,{variant:"h5",gutterBottom:!0},this.props.videoName),r.a.createElement("video",{ref:this.props.videoRef,autoPlay:!0})))}}]),t}(n.Component),K=Object(h.withStyles)(function(e){return{videoCard:{width:"100%",heigth:"100%"}}})(H),Q=a(17),X=a.n(Q),Y=a(29),Z={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},ee=function(){function e(){Object(o.a)(this,e),this.rtcConnection=new RTCPeerConnection(Z),this.localConnectionData={description:null,candidates:[]},this.subscribers=new Set,this.localMediaStreamPromise=null,this.remoteMediaStreamPromise=null,this.rtcConnection.onicecandidate=this.handleIceCandidate.bind(this)}return Object(s.a)(e,[{key:"subscribe",value:function(e){this.subscribers.add(e)}},{key:"unsubscribe",value:function(e){this.subscribers.delete(e)}},{key:"notifyAll",value:function(){var e=this;this.subscribers.forEach(function(t){return t(JSON.stringify(e.localConnectionData))})}},{key:"getLocalMediaStream",value:function(){var e=Object(Y.a)(X.a.mark(function e(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===this.localMediaStreamPromise&&(this.localMediaStreamPromise=new Promise(function(e,t){navigator.getUserMedia({video:!0,audio:!0},function(t){return e(t)},function(){return t(new Error("Failed to get local media stream"))})})),e.abrupt("return",this.localMediaStreamPromise);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRemoteMediaStream",value:function(){var e=Object(Y.a)(X.a.mark(function e(){var t=this;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===this.remoteMediaStreamPromise&&(this.remoteMediaStreamPromise=new Promise(function(e,a){t.rtcConnection.ontrack=function(t){e(t.streams[0])}})),e.abrupt("return",this.remoteMediaStreamPromise);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createOffer",value:function(){var e=Object(Y.a)(X.a.mark(function e(){var t,a,n=this;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalMediaStream();case 2:return(t=e.sent).getTracks().forEach(function(e){return n.rtcConnection.addTrack(e,t)}),e.next=6,this.rtcConnection.createOffer();case 6:return a=e.sent,e.next=9,this.rtcConnection.setLocalDescription(a);case 9:this.localConnectionData.description=this.rtcConnection.localDescription,this.notifyAll();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=Object(Y.a)(X.a.mark(function e(t){var a,n,r,i,c=this;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.description,n=t.candidates,console.log("handleOffer: ".concat(a)),e.next=4,this.rtcConnection.setRemoteDescription(a);case 4:return e.next=6,this.getLocalMediaStream();case 6:return(r=e.sent).getTracks().forEach(function(e){return c.rtcConnection.addTrack(e,r)}),e.t0=this.rtcConnection,e.next=11,this.rtcConnection.createAnswer();case 11:return e.t1=e.sent,e.next=14,e.t0.setLocalDescription.call(e.t0,e.t1);case 14:this.localConnectionData.description=this.rtcConnection.localDescription,i=0;case 16:if(!(i<n.length)){e.next=22;break}return e.next=19,this.handleRemoteIceCandidate(n[i]);case 19:i++,e.next=16;break;case 22:this.notifyAll();case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=Object(Y.a)(X.a.mark(function e(t){var a,n,r;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.description,n=t.candidates,console.log("handleAnswer: ".concat(a)),e.next=4,this.rtcConnection.setRemoteDescription(a);case 4:this.localConnectionData.description=this.rtcConnection.localDescription,r=0;case 6:if(!(r<n.length)){e.next=12;break}return e.next=9,this.handleRemoteIceCandidate(n[r]);case 9:r++,e.next=6;break;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleIceCandidate",value:function(){var e=Object(Y.a)(X.a.mark(function e(t){var a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.candidate,console.log("handleIceCandidate: ".concat(a)),a){e.next=4;break}return e.abrupt("return");case 4:this.localConnectionData.candidates.push({candidate:a}),this.notifyAll();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleRemoteIceCandidate",value:function(){var e=Object(Y.a)(X.a.mark(function e(t){var a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.candidate,console.log("handleRemoteIceCandidate: ".concat(a)),a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.rtcConnection.addIceCandidate(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={startOrAccept:null,isConnected:!1,localConnectionData:"",remoteConnectionData:""},a.rtcConnectionMngr=new ee,a.rtcConnectionMngr.subscribe(function(e){return a.handleLocalConnectionData(e)}),a.localVideoStream=null,a.localVideoEl=null,a.remoteVideoStream=null,a.remoteVideoEl=null,a.setLocalVideoEl=a.setLocalVideoEl.bind(Object(d.a)(Object(d.a)(a))),a.setRemoteVideoEl=a.setRemoteVideoEl.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"setLocalVideoEl",value:function(e){var t=this;this.localVideoEl=e,this.rtcConnectionMngr.getLocalMediaStream().then(function(e){return t.localVideoStream=e}).then(function(){t.localVideoEl&&(t.localVideoEl.srcObject=t.localVideoStream)})}},{key:"setRemoteVideoEl",value:function(e){var t=this;this.remoteVideoEl=e,this.rtcConnectionMngr.getRemoteMediaStream().then(function(e){return t.remoteVideoStream=e}).then(function(){t.remoteVideoEl&&(t.remoteVideoEl.srcObject=t.remoteVideoStream)})}},{key:"handleLocalConnectionData",value:function(e){this.setState({localConnectionData:e})}},{key:"handleRemoteConnectionData",value:function(e){this.setState({remoteConnectionData:e})}},{key:"handleStartOrAcceptSelection",value:function(e){this.setState({startOrAccept:e}),"start"===e&&this.rtcConnectionMngr.createOffer()}},{key:"handleConnectBtnClick",value:function(){var e=this,t=JSON.parse(this.state.remoteConnectionData);try{"start"===this.state.startOrAccept?this.rtcConnectionMngr.handleAnswer(t).then(function(){return e.setState({isConnected:!0})}):"accept"===this.state.startOrAccept&&this.rtcConnectionMngr.handleOffer(t).then(function(){return e.setState({isConnected:!0})})}catch(a){console.error(a)}}},{key:"renderSetupConnectionUI",value:function(){var e=this.state.startOrAccept,t=this.props.classes;return r.a.createElement(A.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(A.a,{item:!0},this.renderStartOrAcceptConnectionRadioGroup()),r.a.createElement(A.a,{item:!0,className:t.offerAnswerInputContainer},e&&this.renderOfferAnswerFields()),r.a.createElement(A.a,{item:!0},e&&this.renderConnectBtn()))}},{key:"renderStartOrAcceptConnectionRadioGroup",value:function(){var e=this,t=this.state.startOrAccept,a=this.props.classes;return r.a.createElement(L.a,{component:"fieldset"},r.a.createElement(_.a,{component:"legend",className:a.startOrAcceptFormLabel},r.a.createElement(G.a,{variant:"h5"},"Setup a WebRTC connection via Carrier Pigeon"),r.a.createElement(G.a,{variant:"subtitle1"},"now compatible with smoke signals & messages in a bottle!"),r.a.createElement(G.a,{variant:"caption"},"Note: Connections can be setup via pigeon or like literally anything else...")),r.a.createElement(D.a,{row:!0,name:"start_or_accept",value:t,onChange:function(t){return e.handleStartOrAcceptSelection(t.target.value)},style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(V.a,{value:"start",control:r.a.createElement(B.a,null),label:"Start a Connection",disabled:null!==t}),r.a.createElement(V.a,{value:"accept",control:r.a.createElement(B.a,null),label:"Accept a Connection",disabled:null!==t})))}},{key:"renderConnectBtn",value:function(){var e=this,t=this.state,a=t.startOrAccept,n=t.localConnectionData,i=t.remoteConnectionData,c=t.isConnected,o=this.props.classes,s=!0;return"start"===a?s=!n||!i||c:"accept"===a&&(s=!i||c),r.a.createElement(j.a,{disabled:s,variant:"contained",color:"primary",className:o.startOrAcceptConnectBtn,onClick:function(){return e.handleConnectBtnClick()}},"Connect")}},{key:"renderOfferAnswerFields",value:function(){var e=this,t=this.state,a=t.startOrAccept,n=t.localConnectionData,i=t.remoteConnectionData,c=this.props.classes,o=r.a.createElement(I.a,{label:"Get this from your friend!",onChange:function(t){return e.handleRemoteConnectionData(t.target.value)},value:i,multiline:!0,rows:"1",margin:"normal",variant:"outlined",className:c.offerAnswerInput}),s=r.a.createElement(I.a,{label:"Send this to your friend!",disabled:!0,value:n,multiline:!0,rows:"1",margin:"normal",variant:"outlined",className:c.offerAnswerInput});return r.a.createElement(A.a,{container:!0,spacing:12,justify:"space-evenly"},r.a.createElement(A.a,{item:!0,xs:4},"start"===a&&s,"accept"===a&&o),r.a.createElement(A.a,{item:!0,xs:4},"start"===a&&o,"accept"===a&&n&&s))}},{key:"renderVideoChatUI",value:function(){var e=this.props.classes;return r.a.createElement(A.a,{container:!0,spacing:12,justify:"center",alignItems:"stretch",className:e.videoChatContainer},r.a.createElement(A.a,{item:!0,xs:6,className:e.doublePadded},r.a.createElement(K,{videoName:"Local",videoRef:this.setLocalVideoEl})),r.a.createElement(A.a,{item:!0,xs:6,className:e.doublePadded},r.a.createElement(K,{videoName:"Remote",videoRef:this.setRemoteVideoEl})))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},this.renderVideoChatUI(),this.renderSetupConnectionUI())}}]),t}(n.Component),ae=Object(h.withStyles)(function(e){return{root:{padding:"20px"},videoChatContainer:{paddingBottom:"30px"},startOrAcceptFormLabel:{marginBottom:"20px"},offerAnswerInputContainer:{width:"100%",marginBottom:"30px"},offerAnswerInput:{width:"100%"},doublePadded:{padding:2*e.spacing.unit}}})(te),ne=a(109),re=a.n(ne),ie=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"stretch",className:e.aboutTab},r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"h1"},"Pigeon RTC")),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement("img",{src:re.a,alt:"pigeon rtc logo",className:e.pigeonSvg,title:"img credit goes to: https://www.svgrepo.com/svg/275543/dove-pigeon"})),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"h4"},"Setup video chats using carrier pigeons!"),r.a.createElement(G.a,{variant:"h6"},"It's ",r.a.createElement("a",{href:"https://webrtc.org/"},"WebRTC")," without the signalling servers ..and with pigeons!"),r.a.createElement(G.a,{variant:"subtitle1"},"(See also ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/IP_over_Avian_Carriers"},"IPoAC"),")")),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:this.props.onMoreInfoBtnClick},"...Ummm What?")))}}]),t}(n.Component),ce=Object(h.withStyles)(function(e){return{aboutTab:{padding:"100px"},aboutTabSection:{marginBottom:"50px"},pigeonSvg:{width:"300px",height:"300px"}}})(ie),oe=a(110),se=a.n(oe),le=a(111),ue=a.n(le),me=a(112),de=a.n(me),he=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderWebRTCNeedsServers",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"h4"},"WebRTC still needs servers")),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"body1",className:e.aboutSectionBodyText},"While WebRTC lets us do some ",r.a.createElement("a",{href:"https://webrtc.org/start/#demos-and-samples"},"pretty cool things"),", such as ",r.a.createElement("a",{href:"https://appr.tc/"},"real time video chats")," & ",r.a.createElement("a",{href:"https://webrtc.github.io/samples/src/content/datachannel/filetransfer/"},"file transfers."),r.a.createElement("br",null),"It still has one major unforgivable shortcomming ... it still needs servers.")),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement("img",{src:de.a,alt:"web rtc needs servers"}),r.a.createElement(G.a,{variant:"caption",gutterBottom:!0},r.a.createElement("a",{href:"https://www.html5rocks.com/en/tutorials/webrtc/infrastructure/"},"Read more about WebRTC Signalling"))))}},{key:"renderSignallingComparison",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"h4"},"Pigeon RTC takes away the need for signalling servers!")),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(A.a,{container:!0,direction:"row",justify:"space-evenly",spacing:16},r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement(G.a,{variant:"h6"},"WebRTC Signalling")),r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement(G.a,{variant:"h6"},"PigeonRTC Signalling"))),r.a.createElement(A.a,{container:!0,direction:"row",justify:"space-evenly",spacing:16},r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement("img",{src:ue.a,alt:"web rtc signalling",className:e.signallingImg})),r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement("img",{src:se.a,alt:"pigeon rtc signalling",className:e.signallingImg})))),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(G.a,{variant:"body1",className:e.aboutSectionBodyText},"Instead relying on cold unfeeling racks of machinery to connect us,",r.a.createElement("br",null),"we can instead put our faith in disease ridden flying rats!")))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"center",className:e.aboutTab},this.renderWebRTCNeedsServers(),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection}),this.renderSignallingComparison(),r.a.createElement(A.a,{item:!0,className:e.aboutTabSection},r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:this.props.onConnectBtnClick},"...Okay")))}}]),t}(n.Component),pe=Object(h.withStyles)(function(e){return{aboutTab:{padding:"100px"},aboutTabSection:{marginBottom:"50px"},signallingImg:{width:"100%"},aboutSectionBodyText:{fontSize:"24px"}}})(he),fe=Object(h.createMuiTheme)({palette:{primary:f.a,secondary:v.a}}),be=Object.freeze({PIGEON:"pigeon",ABOUT1:"about1",ABOUT2:"about2"}),ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={currentTab:be.ABOUT1},a.handleTabChange=a.handleTabChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleTabChange",value:function(e){this.setState({currentTab:e})}},{key:"render",value:function(){var e=this,t=this.state.currentTab;return r.a.createElement(C.a,null,r.a.createElement(h.MuiThemeProvider,{theme:fe},r.a.createElement("div",{className:"App"},r.a.createElement(O.a,{position:"static"},r.a.createElement(w.a,{value:t,onChange:function(t,a){return e.handleTabChange(a)}},r.a.createElement(k.a,{label:"What is it?",value:be.ABOUT1}),r.a.createElement(k.a,{label:"...Ummm What?",value:be.ABOUT2}),r.a.createElement(k.a,{label:"Coo-Coo-nnect!",value:be.PIGEON}))),t===be.ABOUT1&&r.a.createElement(ce,{onMoreInfoBtnClick:function(){return e.handleTabChange(be.ABOUT2)}}),t===be.ABOUT2&&r.a.createElement(pe,{onConnectBtnClick:function(){return e.handleTabChange(be.PIGEON)}}),t===be.PIGEON&&r.a.createElement(ae,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(297);c.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[118,2,1]]]);
//# sourceMappingURL=main.51916fdc.chunk.js.map