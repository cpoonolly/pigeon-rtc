{"version":3,"sources":["components/WebRTCVideo.js","connectionManagers/WebRTCConnectionManager.js","tabs/WebRTCWithServerTab.js","connectionManagers/ManualWebRTCConnectionManager.js","tabs/WebRTCManualTab.js","App.js","serviceWorker.js","index.js"],"names":["WebRTCVideo","classes","this","props","react_default","a","createElement","Card_default","className","videoCard","CardContent_default","Typography_default","variant","gutterBottom","videoName","ref","videoRef","autoPlay","Component","withStyles","theme","width","heigth","ICE_CONFIGURATION","iceServers","urls","DEFAULT_SOCKET_URL","WebRTCConnectionManager","serverUrl","Object","classCallCheck","rtcConnection","RTCPeerConnection","socket","io","connect","localMediaStreamPromise","remoteMediaStreamPromise","onicecandidate","handleIceCandidate","bind","on","handleOffer","handleAnswer","handleRemoteIceCandidate","Promise","resolve","reject","navigator","getUserMedia","video","audio","stream","Error","_this","ontrack","event","console","log","streams","getLocalMediaStream","localMediaStream","getTracks","forEach","track","_this2","addTrack","createOffer","localDescription","setLocalDescription","emit","description","concat","setRemoteDescription","_this3","createAnswer","candidate","addIceCandidate","WebRTCWithServerTab","possibleConstructorReturn","getPrototypeOf","call","state","isServerSet","rtcConnectionMngr","localVideoStream","localVideoEl","remoteVideoStream","remoteVideoEl","handleCallStart","assertThisInitialized","handleCallEnd","handleServerUrlChange","handleSetServerClick","setLocalVideoEl","setRemoteVideoEl","newText","setState","el","then","mediaStream","srcObject","getRemoteMediaStream","_this4","Grid_default","container","spacing","uiContainer","justify","alignItems","item","xs","TextField_default","label","fullWidth","value","onChange","target","doublePadded","Button_default","color","onClick","components_WebRTCVideo","renderVideoChatUIControlPanel","_this5","controlPanelBtnContainer","controlPanelBtn","Icon_default","controlPanelBtnIcon","renderVideoChatUI","renderSetServerUI","height","padding","unit","paddingRight","paddingLeft","marginLeft","localConnectionData","candidates","subscribers","Set","handler","add","delete","JSON","stringify","notifyAll","i","length","push","WebRTCManualTab","startOrAccept","isConnected","remoteConnectionData","rtcConnectionManager","ManualWebRTCConnectionManager","subscribe","handleLocalConnectionData","parse","error","direction","renderStartOrAcceptConnectionRadioGroup","offerAnswerInputContainer","renderOfferAnswerFields","renderConnectBtn","FormControl_default","component","FormLabel_default","startOrAcceptFormLabel","RadioGroup_default","row","name","handleStartOrAcceptSelection","FormControlLabel_default","control","Radio_default","disabled","_this6","_this$state","isDisabled","startOrAcceptConnectBtn","handleConnectBtnClick","_this7","_this$state2","remoteConnectionTextField","handleRemoteConnectionData","multiline","rows","margin","offerAnswerInput","localConnectionTextField","videoChatContainer","root","renderSetupConnectionUI","paddingBottom","marginBottom","createMuiTheme","palette","primary","blue","secondary","purple","TAB_OPTIONS","freeze","SERVER","MANUAL","App","currentTab","handleTabChange","CssBaseline_default","styles","AppBar_default","position","Tabs_default","Tab_default","tabs_WebRTCWithServerTab","tabs_WebRTCManualTab","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2651296f.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\n// material ui\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = ((theme) => ({\n  videoCard: {\n    width: '100%',\n    heigth: '100%',\n  }\n}));\n\nclass WebRTCVideo extends Component {\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <Card className={classes.videoCard}>\n        <CardContent>\n          <Typography variant=\"h5\" gutterBottom>\n            {this.props.videoName}\n          </Typography>\n          <video ref={this.props.videoRef} autoPlay={true}></video>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nexport default withStyles(styles)(WebRTCVideo);\n","import io from 'socket.io-client';\n\nconst ICE_CONFIGURATION = {\n  iceServers: [\n    {urls: 'stun:stun.l.google.com:19302'}\n  ]\n};\n\nconst DEFAULT_SOCKET_URL = 'http://localhost:8080';\n\nexport default class WebRTCConnectionManager {\n  constructor(serverUrl) {\n    this.rtcConnection = new RTCPeerConnection(ICE_CONFIGURATION);\n    this.socket = io.connect(serverUrl || DEFAULT_SOCKET_URL);\n\n    this.localMediaStreamPromise = null;\n    this.remoteMediaStreamPromise = null;\n\n    this.rtcConnection.onicecandidate = this.handleIceCandidate.bind(this);\n\n    this.socket.on('offer', this.handleOffer.bind(this));\n    this.socket.on('answer', this.handleAnswer.bind(this));\n    this.socket.on('ice_candidate', this.handleRemoteIceCandidate.bind(this));\n    // this.socket.on('disconnect', this.handleDisconnect.bind(this));\n  }\n\n  async getLocalMediaStream() {\n    if (this.localMediaStreamPromise === null) {\n      this.localMediaStreamPromise = new Promise((resolve, reject) => {\n        navigator.getUserMedia(\n          {video: true, audio: true},\n          (stream) => resolve(stream),\n          () => reject(new Error('Failed to get local media stream'))\n        );\n      });\n    }\n\n    return this.localMediaStreamPromise;\n  }\n\n  async getRemoteMediaStream() {\n    if (this.remoteMediaStreamPromise === null) {\n      this.remoteMediaStreamPromise = new Promise((resolve, reject) => {\n        this.rtcConnection.ontrack = ((event) => {\n          console.log('onRemoteTrack');\n          resolve(event.streams[0]);\n        });\n      });\n    }\n\n    return this.remoteMediaStreamPromise;\n  }\n\n  /* Initiate a call */\n  async call() {\n    // add local media stream tracks to rtc connection\n    let localMediaStream = await this.getLocalMediaStream();\n    localMediaStream.getTracks().forEach((track) => this.rtcConnection.addTrack(track, localMediaStream));\n\n    // send an offer\n    let localDescription = await this.rtcConnection.createOffer();\n    await this.rtcConnection.setLocalDescription(localDescription);\n    this.socket.emit('offer', {description: this.rtcConnection.localDescription});\n  }\n\n  /* Handle an incoming call */\n  async handleOffer({description}) {\n    console.log(`handleOffer: ${description}`);\n\n    await this.rtcConnection.setRemoteDescription(description);\n\n    // add local media stream tracks to rtc connection\n    let localMediaStream = await this.getLocalMediaStream();\n    localMediaStream.getTracks().forEach((track) => this.rtcConnection.addTrack(track, localMediaStream));\n\n    // send an answer\n    await this.rtcConnection.setLocalDescription(await this.rtcConnection.createAnswer());\n    this.socket.emit('answer', {description: this.rtcConnection.localDescription});\n  }\n\n  /* Handle an answer to our offer (if we initiated the call) */\n  async handleAnswer({description}) {\n    console.log(`handleAnswer: ${description}`);\n    await this.rtcConnection.setRemoteDescription(description);\n  }\n\n  async handleIceCandidate({candidate}) {\n    console.log(`handleIceCandidate: ${candidate}`);\n\n    if (!candidate) return;\n    this.socket.emit('ice_candidate', {candidate});\n  }\n\n  async handleRemoteIceCandidate({candidate}) {\n    console.log(`handleRemoteIceCandidate: ${candidate}`);\n\n    if (!candidate) return;\n    await this.rtcConnection.addIceCandidate(candidate);\n  }\n}\n","import React, { Component } from 'react';\n\n// material-ui\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport Icon from '@material-ui/core/Icon';\nimport TextField from '@material-ui/core/TextField';\n\n// web rtc stuff\nimport WebRTCVideo from '../components/WebRTCVideo';\nimport WebRTCConnectionManager from '../connectionManagers/WebRTCConnectionManager';\n\nconst DEFAULT_SOCKET_URL = 'http://localhost:8080';\n\nconst styles = ((theme) => ({\n  uiContainer: {\n    height: '100%',\n    padding: '100px',\n  },\n  doublePadded: {\n    padding: theme.spacing.unit * 2,\n  },\n  controlPanelBtnContainer: {\n    paddingRight: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit,\n  },\n  controlPanelBtn: {\n    width: '100%',\n    height: '100%',\n  },\n  controlPanelBtnIcon: {\n    marginLeft: '15px'\n  },\n}));\n\nclass WebRTCWithServerTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      serverUrl: DEFAULT_SOCKET_URL,\n      isServerSet: false\n    };\n\n    this.rtcConnectionMngr = null;\n\n    // since we're using MediaStream objects need to store these as members and user refs to set the video src's\n    this.localVideoStream = null;\n    this.localVideoEl = null;\n    \n    this.remoteVideoStream = null;\n    this.remoteVideoEl = null;\n\n    this.handleCallStart = this.handleCallStart.bind(this);\n    this.handleCallEnd = this.handleCallEnd.bind(this);\n    this.handleServerUrlChange = this.handleServerUrlChange.bind(this);\n    this.handleSetServerClick = this.handleSetServerClick.bind(this);\n\n    this.setLocalVideoEl = this.setLocalVideoEl.bind(this);\n    this.setRemoteVideoEl = this.setRemoteVideoEl.bind(this);\n  }\n\n  handleServerUrlChange(newText) {\n    this.setState({serverUrl: newText});\n  }\n\n  handleSetServerClick() {\n    this.rtcConnectionMngr = new WebRTCConnectionManager(this.state.serverUrl);\n    this.setState({isServerSet: true});\n  }\n\n  handleCallStart() {\n    console.log('Call Started!');\n\n    this.rtcConnectionMngr.call();\n  }\n\n  handleCallEnd() {\n    console.log('Call Ended!');\n\n    console.log('...no it didn\\'t...');\n  }\n\n  setLocalVideoEl(el) {\n    this.localVideoEl = el;\n\n    this.rtcConnectionMngr.getLocalMediaStream()\n      .then((mediaStream) => this.localVideoStream = mediaStream)\n      .then(() => this.localVideoEl.srcObject = this.localVideoStream);\n  }\n\n  setRemoteVideoEl(el) {\n    this.remoteVideoEl = el;\n\n    this.rtcConnectionMngr.getRemoteMediaStream()\n      .then((mediaStream) => this.remoteVideoStream = mediaStream)\n      .then(() => this.remoteVideoEl.srcObject = this.remoteVideoStream);\n  }\n\n  renderSetServerUI() {\n    const { classes } = this.props;\n\n    return (\n      <Grid container spacing={12} className={classes.uiContainer} justify=\"center\" alignItems=\"stretch\">\n        <Grid item xs={4}>\n          <TextField\n            label=\"Server Url\"\n            fullWidth\n            value={this.state.serverUrl}\n            onChange={(event) => this.handleServerUrlChange(event.target.value)}\n          />\n        </Grid>\n        <Grid item xs={4} className={classes.doublePadded}>\n          <Button variant=\"contained\" color=\"primary\" onClick={this.handleSetServerClick}>Connect</Button>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  renderVideoChatUI() {\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.uiContainer}>\n        <Grid container spacing={12} justify=\"center\" alignItems=\"stretch\">\n          <Grid item xs={6} className={classes.doublePadded}>\n            <WebRTCVideo videoName=\"Local\" videoRef={this.setLocalVideoEl}/>\n          </Grid>\n          <Grid item xs={6} className={classes.doublePadded}>\n            <WebRTCVideo videoName=\"Remote\" videoRef={this.setRemoteVideoEl}/>\n          </Grid>\n        </Grid>\n        <Grid container spacing={12} justify=\"center\" className={classes.doublePadded}>\n          <Grid item xs={6}>\n            {this.renderVideoChatUIControlPanel()}\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n\n  renderVideoChatUIControlPanel() {\n    const { classes } = this.props;\n  \n    return (\n      <Card>\n        <CardContent>  \n          <Grid container spacing={12} justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={4} className={classes.controlPanelBtnContainer}>\n              <Button variant=\"contained\" color=\"primary\" className={classes.controlPanelBtn} onClick={() => this.handleCallStart()}>\n                Call <Icon className={classes.controlPanelBtnIcon}>call</Icon>\n              </Button>\n            </Grid>\n            <Grid item xs={4} className={classes.controlPanelBtnContainer}>\n              <Button variant=\"contained\" color=\"primary\" className={classes.controlPanelBtn} onClick={() => this.handleCallEnd()}>\n                End Call <Icon className={classes.controlPanelBtnIcon}>call_end</Icon>\n              </Button>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  render() {\n    return (!this.state.isServerSet ? this.renderSetServerUI() : this.renderVideoChatUI());\n  }\n}\n\nexport default withStyles(styles)(WebRTCWithServerTab);\n","const ICE_CONFIGURATION = {\n  iceServers: [\n    {urls: 'stun:stun.l.google.com:19302'}\n  ]\n};\n\n// const SOCKET_URL = 'http://localhost:8080';\n\nexport default class WebRTCConnectionManager {\n  constructor() {\n    this.rtcConnection = new RTCPeerConnection(ICE_CONFIGURATION);\n\n    this.localConnectionData = {description: null, candidates: []};\n    this.subscribers = new Set();\n\n    // this.socket = io.connect(SOCKET_URL);\n\n    this.localMediaStreamPromise = null;\n    this.remoteMediaStreamPromise = null;\n\n    this.rtcConnection.onicecandidate = this.handleIceCandidate.bind(this);\n\n    // this.socket.on('offer', this.handleOffer.bind(this));\n    // this.socket.on('answer', this.handleAnswer.bind(this));\n    // this.socket.on('ice_candidate', this.handleRemoteIceCandidate.bind(this));\n  }\n\n  subscribe(handler) {\n    this.subscribers.add(handler);\n  }\n\n  unsubscribe(handler) {\n    this.subscribers.delete(handler);\n  }\n\n  notifyAll() {\n    this.subscribers.forEach((handler) => handler(JSON.stringify(this.localConnectionData)));\n  }\n\n  async getLocalMediaStream() {\n    if (this.localMediaStreamPromise === null) {\n      this.localMediaStreamPromise = new Promise((resolve, reject) => {\n        navigator.getUserMedia(\n          {video: true, audio: true},\n          (stream) => resolve(stream),\n          () => reject(new Error('Failed to get local media stream'))\n        );\n      });\n    }\n\n    return this.localMediaStreamPromise;\n  }\n\n  async getRemoteMediaStream() {\n    if (this.remoteMediaStreamPromise === null) {\n      this.remoteMediaStreamPromise = new Promise((resolve, reject) => {\n        this.rtcConnection.ontrack = ((event) => {\n          console.log('onRemoteTrack');\n          resolve(event.streams[0]);\n        });\n      });\n    }\n\n    return this.remoteMediaStreamPromise;\n  }\n\n  /* Initiate a call */\n  async createOffer() {\n    // add local media stream tracks to rtc connection\n    let localMediaStream = await this.getLocalMediaStream();\n    localMediaStream.getTracks().forEach((track) => this.rtcConnection.addTrack(track, localMediaStream));\n\n    // send an offer\n    let localDescription = await this.rtcConnection.createOffer();\n    await this.rtcConnection.setLocalDescription(localDescription);\n    this.localConnectionData.description = this.rtcConnection.localDescription;\n\n    this.notifyAll();\n    // this.socket.emit('offer', {description: this.rtcConnection.localDescription});\n  }\n\n  /* Handle an incoming call */\n  async handleOffer({description, candidates}) {\n    console.log(`handleOffer: ${description}`);\n\n    await this.rtcConnection.setRemoteDescription(description);\n\n    // add local media stream tracks to rtc connection\n    let localMediaStream = await this.getLocalMediaStream();\n    localMediaStream.getTracks().forEach((track) => this.rtcConnection.addTrack(track, localMediaStream));\n\n    // send an answer\n    await this.rtcConnection.setLocalDescription(await this.rtcConnection.createAnswer());\n\n    this.localConnectionData.description = this.rtcConnection.localDescription;\n    for (let i = 0; i < candidates.length; i++) {\n      await this.handleRemoteIceCandidate(candidates[i]);\n    }\n\n    this.notifyAll();\n    // this.socket.emit('answer', {description: this.rtcConnection.localDescription});\n  }\n\n  /* Handle an answer to our offer (if we initiated the call) */\n  async handleAnswer({description, candidates}) {\n    console.log(`handleAnswer: ${description}`);\n    await this.rtcConnection.setRemoteDescription(description);\n\n    this.localConnectionData.description = this.rtcConnection.localDescription;\n    for (let i = 0; i < candidates.length; i++) {\n      await this.handleRemoteIceCandidate(candidates[i]);\n    }\n  }\n\n  async handleIceCandidate({candidate}) {\n    console.log(`handleIceCandidate: ${candidate}`);\n\n    if (!candidate) return;\n    this.localConnectionData.candidates.push({candidate});\n    this.notifyAll();\n    // this.socket.emit('ice_candidate', {candidate});\n  }\n\n  async handleRemoteIceCandidate({candidate}) {\n    console.log(`handleRemoteIceCandidate: ${candidate}`);\n\n    if (!candidate) return;\n    await this.rtcConnection.addIceCandidate(candidate);\n  }\n}\n","import React, { Component } from 'react';\n\n// material-ui\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\n\n\n// web rtc stuff\nimport WebRTCVideo from '../components/WebRTCVideo';\nimport ManualWebRTCConnectionManager from '../connectionManagers/ManualWebRTCConnectionManager';\n\nconst styles = ((theme) => ({\n  root: {\n    padding: '20px',\n  },\n  videoChatContainer: {\n    paddingBottom: '30px',\n  },\n  startOrAcceptFormLabel: {\n    marginBottom: '20px',\n  },\n  offerAnswerInputContainer: {\n    width: '100%',\n    marginBottom: '30px',\n  },\n  offerAnswerInput: {\n    width: '100%'\n  },\n  doublePadded: {\n    padding: theme.spacing.unit * 2,\n  },\n}));\n\nclass WebRTCManualTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startOrAccept: null,\n      isConnected: false,\n      localConnectionData: '',\n      remoteConnectionData: '',\n    };\n\n    this.rtcConnectionManager = new ManualWebRTCConnectionManager();\n    this.rtcConnectionManager.subscribe((localConnectionData) => this.handleLocalConnectionData(localConnectionData));\n\n    // since we're using MediaStream objects need to store these as members and user refs to set the video src's\n    this.localVideoStream = null;\n    this.localVideoEl = null;\n    \n    this.remoteVideoStream = null;\n    this.remoteVideoEl = null;\n\n    this.setLocalVideoEl = this.setLocalVideoEl.bind(this);\n    this.setRemoteVideoEl = this.setRemoteVideoEl.bind(this);\n  }\n\n  setLocalVideoEl(el) {\n    this.localVideoEl = el;\n\n    this.rtcConnectionManager.getLocalMediaStream()\n      .then((mediaStream) => this.localVideoStream = mediaStream)\n      .then(() => {\n        if (this.localVideoEl) this.localVideoEl.srcObject = this.localVideoStream;\n      });\n  }\n\n  setRemoteVideoEl(el) {\n    this.remoteVideoEl = el;\n\n    this.rtcConnectionManager.getRemoteMediaStream()\n      .then((mediaStream) => this.remoteVideoStream = mediaStream)\n      .then(() => {\n        if (this.remoteVideoEl) this.remoteVideoEl.srcObject = this.remoteVideoStream;\n      });\n  }\n\n  handleLocalConnectionData(localConnectionData) {\n    this.setState({localConnectionData});\n  }\n\n  handleRemoteConnectionData(remoteConnectionData) {\n    this.setState({remoteConnectionData});\n  }\n\n  handleStartOrAcceptSelection(startOrAccept) {\n    this.setState({startOrAccept});\n    if (startOrAccept === 'start') {\n      this.rtcConnectionManager.createOffer();\n    }\n  }\n\n  handleConnectBtnClick() {\n    const remoteConnectionData = JSON.parse(this.state.remoteConnectionData);\n\n    try {\n      if (this.state.startOrAccept === 'start') {\n        this.rtcConnectionManager.handleAnswer(remoteConnectionData)\n          .then(() => this.setState({isConnected: true}));\n      } else if (this.state.startOrAccept === 'accept') {\n        this.rtcConnectionManager.handleOffer(remoteConnectionData)\n          .then(() => this.setState({isConnected: true}));\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  renderSetupConnectionUI() {\n    const { startOrAccept } = this.state;\n    const { classes } = this.props;\n\n    return (\n      <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n        <Grid item>\n          {this.renderStartOrAcceptConnectionRadioGroup()}\n        </Grid>\n        <Grid item className={classes.offerAnswerInputContainer}>\n          {startOrAccept && this.renderOfferAnswerFields()}\n        </Grid>\n        <Grid item>\n          {startOrAccept && this.renderConnectBtn()}\n        </Grid>\n      </Grid>\n    )\n  }\n\n  renderStartOrAcceptConnectionRadioGroup() {\n    const { startOrAccept } = this.state;\n    const { classes } = this.props;\n\n    return (\n      <FormControl component=\"fieldset\">\n        <FormLabel component=\"legend\" className={classes.startOrAcceptFormLabel}>\n          Start or Accept a WebRTC Connection manually\n        </FormLabel>\n        <RadioGroup\n          row\n          name=\"start_or_accept\"\n          value={startOrAccept}\n          onChange={(event) => this.handleStartOrAcceptSelection(event.target.value)}\n        >\n          <FormControlLabel\n            value=\"start\"\n            control={<Radio />}\n            label=\"Start a Connection\"\n            disabled={startOrAccept !== null}\n          />\n          <FormControlLabel\n            value=\"accept\"\n            control={<Radio />}\n            label=\"Accept a Connection\"\n            disabled={startOrAccept !== null}\n          />\n        </RadioGroup>\n      </FormControl>\n    );\n  }\n\n  renderConnectBtn() {\n    const { startOrAccept, localConnectionData, remoteConnectionData, isConnected } = this.state;\n    const { classes } = this.props;\n\n    let isDisabled = true;\n    if (startOrAccept === 'start') {\n      isDisabled = (!localConnectionData || !remoteConnectionData || isConnected)\n    } else if (startOrAccept === 'accept') {\n      isDisabled = (!remoteConnectionData || isConnected);\n    }\n\n    return (\n      <Button\n        disabled={isDisabled}\n        variant=\"contained\"\n        color=\"primary\"\n        className={classes.startOrAcceptConnectBtn}\n        onClick={() => this.handleConnectBtnClick()}\n      >\n        Connect\n      </Button>\n    );\n  }\n\n  renderOfferAnswerFields() {\n    const { startOrAccept, localConnectionData, remoteConnectionData } = this.state;\n    const { classes } = this.props;\n\n    let remoteConnectionTextField = (\n      <TextField\n        label={`${startOrAccept === 'start' ? 'Answer' : 'Offer'} - Get this from your friend!`}\n        onChange={(event) => this.handleRemoteConnectionData(event.target.value)}\n        value={remoteConnectionData}\n        multiline\n        rows=\"1\"\n        margin=\"normal\"\n        variant=\"outlined\"\n        className={classes.offerAnswerInput}\n      />\n    );\n\n    let localConnectionTextField = (\n      <TextField\n        label={`${startOrAccept === 'start' ? 'Offer' : 'Answer'} - Send this to your friend!`}\n        disabled\n        value={localConnectionData}\n        multiline\n        rows=\"1\"\n        margin=\"normal\"\n        variant=\"outlined\"\n        className={classes.offerAnswerInput}\n      />\n    );\n\n    return (\n      <Grid container spacing={12} justify=\"space-evenly\">\n        <Grid item xs={4}>\n          {startOrAccept === 'start' && localConnectionTextField}\n          {startOrAccept === 'accept' && remoteConnectionTextField}\n        </Grid>\n        <Grid item xs={4}>\n          {startOrAccept === 'start' && remoteConnectionTextField}\n          {startOrAccept === 'accept' && localConnectionData && localConnectionTextField}\n        </Grid>\n      </Grid>\n    );\n  }\n\n  renderVideoChatUI() {\n    const { classes } = this.props;\n\n    return (\n      <Grid container spacing={12} justify=\"center\" alignItems=\"stretch\" className={classes.videoChatContainer}>\n        <Grid item xs={6} className={classes.doublePadded}>\n          <WebRTCVideo videoName=\"Local\" videoRef={this.setLocalVideoEl}/>\n        </Grid>\n        <Grid item xs={6} className={classes.doublePadded}>\n          <WebRTCVideo videoName=\"Remote\" videoRef={this.setRemoteVideoEl}/>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        {this.renderVideoChatUI()}\n        {this.renderSetupConnectionUI()}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(WebRTCManualTab);","import React, { Component } from 'react';\nimport './App.css';\n\n// material-ui\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport purple from '@material-ui/core/colors/purple';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\n// web rtc stuff\nimport WebRTCWithServerTab from './tabs/WebRTCWithServerTab';\nimport WebRTCManualTab from './tabs/WebRTCManualTab';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue,\n    secondary: purple\n  },\n});\n\nconst TAB_OPTIONS = Object.freeze({\n  SERVER: 'server',\n  MANUAL: 'manual',\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentTab: TAB_OPTIONS.SERVER\n    };\n\n    this.handleTabChange = this.handleTabChange.bind(this);\n  }\n\n  handleTabChange(event, value) {\n    this.setState({currentTab: value});\n  }\n\n  render() {\n    const { currentTab } = this.state;\n\n    return (\n      <CssBaseline>\n        <MuiThemeProvider theme={theme}>\n          <div className=\"App\">\n            <AppBar position=\"static\">\n              <Tabs value={currentTab} onChange={this.handleTabChange}>\n                <Tab label=\"Connect by Server\" value={TAB_OPTIONS.SERVER}/>\n                <Tab label=\"Connect Manually\" value={TAB_OPTIONS.MANUAL}/>\n              </Tabs>\n            </AppBar>\n            {currentTab === TAB_OPTIONS.SERVER && <WebRTCWithServerTab></WebRTCWithServerTab>}\n            {currentTab === TAB_OPTIONS.MANUAL && <WebRTCManualTab></WebRTCManualTab>}\n          </div>\n        </MuiThemeProvider>\n      </CssBaseline>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'typeface-roboto';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}